
<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<title>Hyrax - Starting and stopping the BES - OPeNDAP Documentation</title>
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Hyrax_-_Starting_and_stopping_the_BES skin-monobook action-view">
<div id="globalWrapper">
<div id="column-content"><div id="content" class="mw-body-primary" role="main">
	
	
	<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">Hyrax - Starting and stopping the BES</span></h1>
	<div id="bodyContent" class="mw-body">
		<div id="siteSub">From OPeNDAP Documentation</div>
		<div id="contentSub"></div>
		

		<!-- start content -->
<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#The_besctl_command"><span class="tocnumber">1</span> <span class="toctext">The <i>besctl</i> command</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#The_most_common_uses_of_besctl"><span class="tocnumber">2</span> <span class="toctext">The most common uses of <i>besctl</i></span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#About_each_of_the_arguments_to_besctl"><span class="tocnumber">3</span> <span class="toctext">About each of the arguments to <i>besctl</i></span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#help"><span class="tocnumber">3.1</span> <span class="toctext">help</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#start"><span class="tocnumber">3.2</span> <span class="toctext">start</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#stop"><span class="tocnumber">3.3</span> <span class="toctext">stop</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#restart"><span class="tocnumber">3.4</span> <span class="toctext">restart</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#status"><span class="tocnumber">3.5</span> <span class="toctext">status</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#pids"><span class="tocnumber">3.6</span> <span class="toctext">pids</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#kill"><span class="tocnumber">3.7</span> <span class="toctext">kill</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-11"><a href="#About_the_options_accepted_by_besctl"><span class="tocnumber">4</span> <span class="toctext">About the options accepted by <i>besctl</i></span></a>
<ul>
<li class="toclevel-2 tocsection-12"><a href="#server_installation_directory"><span class="tocnumber">4.1</span> <span class="toctext">server installation directory</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#server_configuration_file"><span class="tocnumber">4.2</span> <span class="toctext">server configuration file</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#debugging"><span class="tocnumber">4.3</span> <span class="toctext">debugging</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#help_2"><span class="tocnumber">4.4</span> <span class="toctext">help</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#port"><span class="tocnumber">4.5</span> <span class="toctext">port</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#PID_file"><span class="tocnumber">4.6</span> <span class="toctext">PID file</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#SLL_authentication"><span class="tocnumber">4.7</span> <span class="toctext">SLL authentication</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#unix_socket"><span class="tocnumber">4.8</span> <span class="toctext">unix socket</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#verbose"><span class="tocnumber">4.9</span> <span class="toctext">verbose</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="The_besctl_command"><span class="mw-headline-number">1</span> The <i>besctl</i> command</span></h2>
<p>The <i>besctl</i> command is used to control the BES daemon. For Hyrax version 1.7 and earlier, this the only way to control the BES. Starting with Hyrax 1.8 (release date tentatively set for fall 2011) the <a href="../index.php/Hyrax_-_Administrators_Interface" title="Hyrax - Administrators Interface"> Hyrax Admin Interface</a> can be used to start, stop, reconfigure and debug the BES once the master daemon is started using this command. The <a href="../index.php/Hyrax_-_Administrators_Interface" title="Hyrax - Administrators Interface"> Hyrax Admin Interface</a> also provides for both hard and soft restarts of Hyrax while the <i>besctl</i> command does not.
</p>
<h2><span class="mw-headline" id="The_most_common_uses_of_besctl"><span class="mw-headline-number">2</span> The most common uses of <i>besctl</i></span></h2>
<p>To start and stop the BES, use the <i>besctl</i> command. The besctl command has a number of options, but the most important are the <i>start</i> and <i>stop</i> arguments. To start the BES use:
</p>
<pre>besctl start
</pre>
<p>and to stop it, use:
</p>
<pre>besctl stop
</pre>
<p>The general form for the <i>besctl</i> command is:
</p>
<pre>besctl (help|start|stop|restart|status|pids|kill) [options]
</pre>
<p>where <i>options</i> are:
</p>
<pre>
-i back-end server installation directory
-c use back-end server configuration file CONFIG
-d send debugging for CONTEXT to cerr or &lt;filename&gt;
-h show the help information and exit
-p set port to PORT
-r bes.pid file stored in directory PID_DIR
-s specifies a secure server using SLL authentication
-u set unix socket to UNIX_SOCKET
-v echos version and exit
</pre>
<p>These options are used only in special circumstances; of them all the <i>-d</i> option to turn on debugging is the most useful. The syntax for run-time debugging/diagnostic output is:
</p>
<pre>-d "&lt;output sink&gt;,&lt;context 1&gt;, ...,&lt;context n&gt;"
</pre>
<p>where a typical example would be:
</p>
<pre>-d "cerr,ascii,netcdf,besdaemon"
</pre>
<p>which would tell the daemon to send diagnostic output from the ASCII handler, the NetCDF handler and the BES daemon itself to the terminal's standard error output.
</p>
<h2><span class="mw-headline" id="About_each_of_the_arguments_to_besctl"><span class="mw-headline-number">3</span> About each of the arguments to <i>besctl</i></span></h2>
<p>The besctl command accepts a total of seven arguments.
</p>
<h3><span class="mw-headline" id="help"><span class="mw-headline-number">3.1</span> help</span></h3>
<p>Display help information for the besctl command. The help argument displays, among other things, all of the main <i>centexts</i> that can be used with the debug (<i>-d</i>) option.
</p>
<h3><span class="mw-headline" id="start"><span class="mw-headline-number">3.2</span> start</span></h3>
<p>Start the BES
</p>
<h3><span class="mw-headline" id="stop"><span class="mw-headline-number">3.3</span> stop</span></h3>
<p>Stop the BES. This is a 'hard' stop and any active connections will be dropped.
</p>
<h3><span class="mw-headline" id="restart"><span class="mw-headline-number">3.4</span> restart</span></h3>
<p>This is the same as using the stop and start commands separately. If you want to issue a 'soft' restart of Hyrax, use the Hyrax Admin Interface, which will be available in Hyrax 1.8.
</p>
<h3><span class="mw-headline" id="status"><span class="mw-headline-number">3.5</span> status</span></h3>
<p>This returns the master BES daemon process id number and the user id under which it is running.
</p>
<h3><span class="mw-headline" id="pids"><span class="mw-headline-number">3.6</span> pids</span></h3>
<p>The BES is actually a collection of processes; use this argument to find the process id numbers for them all.
</p>
<h3><span class="mw-headline" id="kill"><span class="mw-headline-number">3.7</span> kill</span></h3>
<p>Sometimes the <i>stop</i> or <i>restart</i> arguments don't work. Use this argument to stop all the processes. The <i>stop</i> command works by sending the TERM signal to the master BES daemon process which then sends that signal to all of the subordinate BES daemon processes, but processes can ignore this signal in certain circumstances. Using the <i>kill</i> argument to besctl sends the KILL signal to all of the processes; KILL cannot be ignored by a process, so this is certain to stop the server.
</p>
<h2><span class="mw-headline" id="About_the_options_accepted_by_besctl"><span class="mw-headline-number">4</span> About the options accepted by <i>besctl</i></span></h2>
<h3><span class="mw-headline" id="server_installation_directory"><span class="mw-headline-number">4.1</span> server installation directory</span></h3>
<p>Use the <i>-i</i> option to force besctl to use a specific directory as the server's root directory. This option is useful if you have several BES daemons running on one machine.
</p>
<pre>-i &lt;directory&gt;
</pre>
<h3><span class="mw-headline" id="server_configuration_file"><span class="mw-headline-number">4.2</span> server configuration file</span></h3>
<p>Use the <i>-c</i> option to force the daemon to use a specific <i>bes.conf</i> file instead of the file found at <i>server root</i>/etc/bes/bes.conf
</p>
<pre>-c &lt;configuration file path&gt;
</pre>
<p>An alternative to usign this option is to use the BES_CONF environment variable to point to a configuration file. Set the value of the environment variable to the path of the configuration file. Be sure to export the environment variable. Also note that as of Hyrax 1.6, the BES reads a significant amount of configuration information from the <i>server root</i>/etc/bes/conf.d directory. You can disable this by editing the bes.conf file; look for the <i>Includes</i> directive.
</p>
<h3><span class="mw-headline" id="debugging"><span class="mw-headline-number">4.3</span> debugging</span></h3>
<p>Use the <i>-d</i> option to achieve fine-grained control over the server's diagnostic output. The -d option takes a single double-quoted string which must contain the name of the output sink for the diagnostic information and a comma separated list of 'debug contexts'. The sink may be either an open stream (e.g., <i>cerr</i>) or a file while the contexts are defined by/in the BES source code. All modules define a context that matches their name and you can see this using the <i>help</i> argument to besctl, although most define additional contexts. The best way to find out about the contexts available is to look at the source code for the server.
</p>
<pre>-d "cerr,besdaemon"
</pre>
<p>Use the special context <i>all</i> to see output from all of the contexts. This will produce very verbose output.
</p>
<h3><span class="mw-headline" id="help_2"><span class="mw-headline-number">4.4</span> help</span></h3>
<p>The <i>-h</i> option prints a short online help message which lists the option switches. Note that this option doesn't work when you supply an argument like <i>start</i>, <i>stop</i>, et c., except for <i>help</i>.
</p>
<pre>-h
</pre>
<h3><span class="mw-headline" id="port"><span class="mw-headline-number">4.5</span> port</span></h3>
<p>Use the <i>-p</i> option to set the port the daemon uses for communication with the Hyrax front-end.
</p>
<pre>-p &lt;number&gt;
</pre>
<h3><span class="mw-headline" id="PID_file"><span class="mw-headline-number">4.6</span> PID file</span></h3>
<p>Use the <i>-r</i> option to tell the BES where to store the master daemon's process id number.
</p>
<pre>-r &lt;directory&gt;
</pre>
<h3><span class="mw-headline" id="SLL_authentication"><span class="mw-headline-number">4.7</span> SLL authentication</span></h3>
<p>Use the <i>-s</i> option to force the server to use SSL authentication. This option is not used with Hyrax. To configure Hyrax for use with SSL, see information about running ht efront-end of the server with SSL. This is typically done by securing a Tomcat or Apache server and is standard procedure used by many general web sites.
</p>
<h3><span class="mw-headline" id="unix_socket"><span class="mw-headline-number">4.8</span> unix socket</span></h3>
<p>Use the <i>-u</i> option to force the BES to use a Unix socket for communication with the front-end instead of the TCP socket. We rarely use this.
</p>
<pre>-u &lt;socket&gt;
</pre>
<h3><span class="mw-headline" id="verbose"><span class="mw-headline-number">4.9</span> verbose</span></h3>
<p>use the <i>-v</i> option to see the version of the bes. The server does not start, ..., et cetera.
</p>
<pre>-v
</pre>



</div>
				<!-- end content -->
				<div class="visualClear"></div>
	</div>
</div></div>
</body></html>