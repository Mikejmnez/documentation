
<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<title>Hyrax - Administrators Interface - OPeNDAP Documentation</title>
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Hyrax_-_Administrators_Interface skin-monobook action-view">
<div id="globalWrapper">
<div id="column-content"><div id="content" class="mw-body-primary" role="main">
	
	
	<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">Hyrax - Administrators Interface</span></h1>
	<div id="bodyContent" class="mw-body">
		<div id="siteSub">From OPeNDAP Documentation</div>
		<div id="contentSub"></div>
		

		<!-- start content -->
<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Overview"><span class="tocnumber">1</span> <span class="toctext">Overview</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Installation_.26_Configuration"><span class="tocnumber">2</span> <span class="toctext">Installation &amp; Configuration</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Configuring_Tomcat"><span class="tocnumber">2.1</span> <span class="toctext">Configuring Tomcat</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#BES"><span class="tocnumber">2.2</span> <span class="toctext">BES</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#OLFS"><span class="tocnumber">2.3</span> <span class="toctext">OLFS</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Configuration_notes"><span class="tocnumber">2.4</span> <span class="toctext">Configuration notes</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="#Using_the_Hyrax_Administrator.27s_Interface"><span class="tocnumber">3</span> <span class="toctext">Using the Hyrax Administrator's Interface</span></a>
<ul>
<li class="toclevel-2 tocsection-8"><a href="#OLFS_Log_Viewer"><span class="tocnumber">3.1</span> <span class="toctext">OLFS Log Viewer</span></a>
<ul>
<li class="toclevel-3 tocsection-9"><a href="#Log_Viewer_Controls"><span class="tocnumber">3.1.1</span> <span class="toctext">Log Viewer Controls</span></a></li>
<li class="toclevel-3 tocsection-10"><a href="#Setting_logging_levels"><span class="tocnumber">3.1.2</span> <span class="toctext">Setting logging levels</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-11"><a href="#BES_Controls"><span class="tocnumber">3.2</span> <span class="toctext">BES Controls</span></a>
<ul>
<li class="toclevel-3 tocsection-12"><a href="#BES_Configuration"><span class="tocnumber">3.2.1</span> <span class="toctext">BES Configuration</span></a></li>
<li class="toclevel-3 tocsection-13"><a href="#Bes_Logging"><span class="tocnumber">3.2.2</span> <span class="toctext">Bes Logging</span></a></li>
<li class="toclevel-3 tocsection-14"><a href="#OLFS_Connections"><span class="tocnumber">3.2.3</span> <span class="toctext">OLFS Connections</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Overview"><span class="mw-headline-number">1</span> Overview</span></h2>
<p>The Hyrax Administrator's Interface (HAI) is a graphical interface to the configuration files and run-time logs of the Hyrax data server. It provides a way to start and stop different parts of Hyrax and to change their configuration files on the fly. Because Hyrax can run on several different hosts, it can be a challenge to manage; the HAI provides a single tabbed interface where the logs and configuration files for those different hosts can easily be tracked.
</p><p>The HAI is a web based interface, so it can be used from any computer that can access the server using a secure connection. 
</p><p>The following describes the installation and configuration of the HAI followed by an explanation of its features. Note that the interface is very simple to configure in most cases - most of the steps described for Tomcat are not necessary for many sites since it's often the case that the servlet engine is already configured for SSL and has one or more users in Tomcat's <i>manager</i> role. Using the interface is very intuitive.
</p>
<h2><span class="mw-headline" id="Installation_.26_Configuration"><span class="mw-headline-number">2</span> Installation &amp; Configuration</span></h2>
<p>When Hyrax and Tomcat are installed all of the software needed to run the Hyrax Administrative Interface (HAI) is in place. However, you will need to do three simple steps in order to turn it in and use it. First you will need to configure Tomcat to use Secure Sockets Layer (SSL, https) and add a user who can login to use the interface. Then you will need to perform minimal additional configuration steps in the two parts of Hyrax - the BES and OLFS. Be sure to skim the Configuration Notes subsection.
</p><p>Prerequisites:
</p>
<ul>
<li> Tomcat 6 installed and working, and
</li>
<li> Hyrax has been installed and simple responses work.
</li>
<li> It's very likely that newer versions of Tomcat will work and it's also likely that you can use another servlet engine, but the specifics of the SSL/https configuration may be different.
</li>
</ul>
<h3><span class="mw-headline" id="Configuring_Tomcat"><span class="mw-headline-number">2.1</span> Configuring Tomcat</span></h3>
<p>In order to use the HAI you will need to configure your tomcat instance to enable SSL. This is very simple for most sites, and it might already be configured for you. We use SSL/https for communication with the HAI because we want to be sure that your server is secure and only those people who you want to control it can. There is a much more detailed document that describes the <a rel="nofollow" class="external text" href="http://tomcat.apache.org/tomcat-7.0-doc/ssl-howto.html">SSL/https configuration</a> for tomcat 7 at the Apache web site.
</p>
<dl>
<dt>Make a Certificate 'keystore'</dt>
<dd> Use the command "keytool -genkey -alias tomcat -keyalg RSA" to make a <i>keystore</i> - a place where SSL certificates are stored so they can be used by the server - and add a single <i>self signed</i> certificate in it. Make sure to remember the password for the keystore! If your installation of Tomcat is already configured for SSL, skip this step - you don't need to make the keystore or the self-signed certificate. Also note that if the <i>keytool</i> program cannot be run from a terminal, try using it's full path with is <i>$JAVA_HOME/bin/keytool</i> (Unix/OSX) or <i>%JAVA_HOME%\bin\keytool</i> (Windows). 
</dd>
<dt>Turn on SSL/https</dt>
<dd> In the file <i>$CATALINA_BASE/conf/server.xml</i> remove the comment surrounding the "SSL HTTP/1.1 Connector" entry. For Tomcat 7, add attributes for the keystore and keystore password (e.g., <i>keystoreFile="${user.home}/.keystore" keystorePass="changeit"</i>) to SSL HTTP/1.1 Connector entry.
</dd>
<dt>Add a Tomcat user</dt>
<dd> Open the file <i>$CATALINA_HOME/conf/tomcat-users.xml</i> and add a user for the interface. Hyrax uses, by default, the <i>role</i> 'manager', so if you already have a user in that role an want them to use the HAI, you are all set. If you don't have anyone set in the manager role, or you want a new user, add a line like the following: <i>&lt;user username="admin" password="hai" roles="manager"/&gt;</i>. If you don't have the role 'manager' defined, add it too: <i>&lt;role rolename="manager"/&gt;</i>
</dd>
<dt>Restart Tomcat
</dt>
</dl>
<h3><span class="mw-headline" id="BES"><span class="mw-headline-number">2.2</span> BES</span></h3>
<p>Edit the file <i>$HYRAX_HOME/etc/bes.conf</i> and remove the comments from the line <i>BES.DaemonPort=11002</i>
</p><p>Restart the BES.
</p>
<h3><span class="mw-headline" id="OLFS"><span class="mw-headline-number">2.3</span> OLFS</span></h3>
<p>Edit the file <i>$CATALINA_HOME/content/opendap/olfs.xml</i>  and remove the comments around the line <i>&lt;adminPort&gt;11002&lt;/adminPort&gt;</i>
</p>
<h3><span class="mw-headline" id="Configuration_notes"><span class="mw-headline-number">2.4</span> Configuration notes</span></h3>
<ol>
<li> Note that because the HAI is a web-based interface, with secure logins using SSL, you can use the interface with your server from anywhere in the world. It might be a good idea, however, to limit the IP addresses that can access the HAI. 
</li>
<li> Using a self-signed certificate is fine, but you will see a warning box when you log in because self-signed certs are not trusted by browsers by default. Most browsers have an option that will suppress that warning or, although it involves some expense, you can get a certificate signed by a Certificate Authority and install that in the keystore
</li>
<li> More about tomcat users: Tomcat supports several authentication Realms including Memory realms, databases and LDAP. We document using memory realms here because other techniques, while better in some ways, are more cumbersome. If you are using memory realms, be sure to protect the <i>tomcat-users.xml</i> file because it contains plain text passwords.
</li>
<li> The <i>&lt;security-constraint&gt;</i> element in the <i>$CATALINA_HOME/opendap/WEB-INF/web.xml</i> configuration file controls the level of access control for the HAI
</li>
<li> The role used by the HAI is set in the <i>$CATALINA_HOME/opendap/WEB-INF/web.xml</i> configuration file using the <i>&lt;auth-constraint&gt;</i> element. You can switch roles by changing the <i>&lt;role-name&gt;</i>.
</li>
</ol>
<h2><span class="mw-headline" id="Using_the_Hyrax_Administrator.27s_Interface"><span class="mw-headline-number">3</span> Using the Hyrax Administrator's Interface</span></h2>
<p>To access the Hyrax Administrator's Interface, go to the base page for your server (http://<i>you server</i>/opendap) and follow the link to the <i>Hyrax Admin Interface</i>. Following that link will present a page where you login to the interface proper. Use the username and password for a user assigned to the <i>manager</i> role for your Tomcat server (see the configuration information above for more information about Tomcat users and roles).
Once logged in to the HAI, you will see a page with two main links; one for the Hyrax front-end and one link for the back-end servers. Together the front-end and the back-end servers make up one installation of Hyrax and they can be spread across several machines. Generally the front-end is run on a host that is outside your institution's firewall, while the back-end servers are inside that firewall on hosts where data are located. It may be helpful to review how <a rel="nofollow" class="external text" href="../index.php/Hyrax#Overview">Hyrax</a> is structured: Hyrax is composed of one <a rel="nofollow" class="external text" href="../index.php/Hyrax_-_OLFS_Configuration">front-end server (OLFS)</a> and one or more <a rel="nofollow" class="external text" href="../index.php/Hyrax_-_BES_Configuration">back-end server (BES)</a> process.
</p><p>Since there is just one instance of the front-end, it has a fairly simple control panel. The back-end servers' control panel is a little more complex because there can be many different back-end servers all part of one Hyrax installation. Use the tabs at the top of the interface to select different back-end server instances. The following sections describe both parts of the interface.
</p>
<h3><span class="mw-headline" id="OLFS_Log_Viewer"><span class="mw-headline-number">3.1</span> OLFS Log Viewer</span></h3>
<p>The OLFS control panel provides access to the log for the front-end of Hyrax. Note that the control panel provides a way to set the logging level for individual classes that make up the front end of the server; this is very useful for debugging and testing new front-end plugins but it rarely needed in an operation setting. The default logging level shipped with the server is generally the most useful level of detail. By default the log lines are not displayed - just click the start button to see them.
</p><p><a href="../index.php/File:Hai-Slide12.jpg" class="image" title="OLFS Log Viewer Default Page"><img alt="OLFS Log Viewer Default Page" src="../images/7/77/Hai-Slide12.jpg" width="720" height="540" /></a>
</p>
<h4><span class="mw-headline" id="Log_Viewer_Controls"><span class="mw-headline-number">3.1.1</span> Log Viewer Controls</span></h4>
<p><a href="../index.php/File:Hai-Slide13.jpg" class="image" title="Log Viewer Controls 1"><img alt="Log Viewer Controls 1" src="../images/2/29/Hai-Slide13.jpg" width="720" height="540" /></a>
</p><p><a href="../index.php/File:Hai-Slide14.jpg" class="image" title="Log Viewer Controls 2"><img alt="Log Viewer Controls 2" src="../images/7/7a/Hai-Slide14.jpg" width="720" height="540" /></a>
</p>
<h4><span class="mw-headline" id="Setting_logging_levels"><span class="mw-headline-number">3.1.2</span> Setting logging levels</span></h4>
<p><a href="../index.php/File:Hai-Slide15.jpg" class="image" title="Setting log levels 1"><img alt="Setting log levels 1" src="../images/a/a6/Hai-Slide15.jpg" width="720" height="540" /></a>
</p><p><a href="../index.php/File:Hai-Slide16.jpg" class="image" title="Setting log levels 2"><img alt="Setting log levels 2" src="../images/8/85/Hai-Slide16.jpg" width="720" height="540" /></a>
</p><p><a href="../index.php/File:Hai-Slide17.jpg" class="image" title="Setting log levels 3"><img alt="Setting log levels 3" src="../images/a/a3/Hai-Slide17.jpg" width="720" height="540" /></a>
</p><p><a href="../index.php/File:Hai-Slide18.jpg" class="image" title="Setting log levels 4"><img alt="Setting log levels 4" src="../images/a/a2/Hai-Slide18.jpg" width="720" height="540" /></a>
</p>
<h3><span class="mw-headline" id="BES_Controls"><span class="mw-headline-number">3.2</span> BES Controls</span></h3>
<p>The BES control panel provides one tab for each back-end server in this instance of Hyrax. Note that in these pictures we have only one BES running and it is called '/' (slash) meaning it is the default BES.
</p><p><a href="../index.php/File:Besctl-01.jpg" class="image" title="Default Admin Page"><img alt="Default Admin Page" src="../images/8/80/Besctl-01.jpg" width="587" height="700" /></a>
</p><p>Beneath the "BES Management " banner you will see one or more tabs. You will always see a tab with the title of "/". This is the default BES for this Hyrax. If the particular installation of Hyrax has multiple BES configured in its OLFS they will appear here as tabs where the "prefix" for the BES from the olfs.xml file will be used as the tab title.
</p><p><a href="../index.php/File:Hai-Slide02.jpg" class="image" title="Admin Page Tour 1"><img alt="Admin Page Tour 1" src="../images/7/72/Hai-Slide02.jpg" width="720" height="540" /></a>
</p><p><a href="../index.php/File:Hai-Slide03.jpg" class="image" title="Admin Page Tour  2"><img alt="Admin Page Tour  2" src="../images/a/a0/Hai-Slide03.jpg" width="720" height="540" /></a>
</p>
<h4><span class="mw-headline" id="BES_Configuration"><span class="mw-headline-number">3.2.1</span> BES Configuration</span></h4>
<p><a href="../index.php/File:Hai-Slide04.jpg" class="image" title="BES Configuration 1"><img alt="BES Configuration 1" src="../images/3/3c/Hai-Slide04.jpg" width="720" height="540" /></a>
</p><p><a href="../index.php/File:Hai-Slide05.jpg" class="image" title="BES Configuration 2"><img alt="BES Configuration 2" src="../images/6/60/Hai-Slide05.jpg" width="720" height="540" /></a>
</p>
<h4><span class="mw-headline" id="Bes_Logging"><span class="mw-headline-number">3.2.2</span> Bes Logging</span></h4>
<p><a href="../index.php/File:Hai-Slide06.jpg" class="image" title="BES Logging 1"><img alt="BES Logging 1" src="../images/7/72/Hai-Slide06.jpg" width="720" height="540" /></a>
</p><p><a href="../index.php/File:Hai-Slide07.jpg" class="image" title="BES Logging 2"><img alt="BES Logging 2" src="../images/c/c4/Hai-Slide07.jpg" width="720" height="540" /></a>
</p><p><a href="../index.php/File:Hai-Slide08.jpg" class="image" title="BES Logging Configuration 1"><img alt="BES Logging Configuration 1" src="../images/a/a4/Hai-Slide08.jpg" width="720" height="540" /></a>
</p><p><a href="../index.php/File:Hai-Slide09.jpg" class="image" title="BES Logging 3"><img alt="BES Logging 3" src="../images/7/74/Hai-Slide09.jpg" width="720" height="540" /></a>
</p>
<h4><span class="mw-headline" id="OLFS_Connections"><span class="mw-headline-number">3.2.3</span> OLFS Connections</span></h4>
<p><a href="../index.php/File:Hai-Slide10.jpg" class="image" title="OLFS Connections 1"><img alt="OLFS Connections 1" src="../images/6/64/Hai-Slide10.jpg" width="720" height="540" /></a>
</p><p><a href="../index.php/File:Hai-Slide11.jpg" class="image" title="OLFS Connections 2"><img alt="OLFS Connections 2" src="../images/b/bb/Hai-Slide11.jpg" width="720" height="540" /></a>
</p>



</div>
				<!-- end content -->
				<div class="visualClear"></div>
	</div>
</div></div>
</body></html>