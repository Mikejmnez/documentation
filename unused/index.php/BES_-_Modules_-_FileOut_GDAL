
<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<title>BES - Modules - FileOut GDAL - OPeNDAP Documentation</title>
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-BES_-_Modules_-_FileOut_GDAL skin-monobook action-view">
<div id="globalWrapper">
<div id="column-content"><div id="content" class="mw-body-primary" role="main">
	
	
	<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">BES - Modules - FileOut GDAL</span></h1>
	<div id="bodyContent" class="mw-body">
		<div id="siteSub">From OPeNDAP Documentation</div>
		<div id="contentSub"></div>
		

		<!-- start content -->
<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Description"><span class="tocnumber">1</span> <span class="toctext">Description</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Services_Handled"><span class="tocnumber">2</span> <span class="toctext">Services Handled</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Services_Provided"><span class="tocnumber">3</span> <span class="toctext">Services Provided</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#How_to_use_the_module"><span class="tocnumber">4</span> <span class="toctext">How to use the module</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Description"><span class="mw-headline-number">1</span> Description</span></h2>
<p>The File Out GDAL module provides the ability to return various kinds of GIS data files as responses from Hyrax. The handler currently supports returning GeoTIFF and JPEG2000 files. Not every dataset served by Hyrax can be returned as a GIS dataset, either because it lacks latitude/longitude information or because it is not organized so that the latitude and longitude values are recognized by this module.
</p><p>Most GIS data include information about their coordinate reference systems, but how that information is encoded can vary widely. This handler looks for geographical information that follows the CF-1.4 standard for [grid mappings and projections <a rel="nofollow" class="external free" href="http://cfconventions.org/Data/cf-conventions/cf-conventions-1.6/build/cf-conventions.html#grid-mappings-and-projections">http://cfconventions.org/Data/cf-conventions/cf-conventions-1.6/build/cf-conventions.html#grid-mappings-and-projections</a>] (note that the link is actually to the CF-1.6 standard; it seems the CF-1.4 site from LLNL is no longer available). It will recognize either the EPSG:4047 or WGS84 Geographical Coordinate systems (GCS) and provides an option to set the default GCS using a parameter (described below).
</p>
<h2><span class="mw-headline" id="Services_Handled"><span class="mw-headline-number">2</span> Services Handled</span></h2>
<p>This module does not handle any services but adds to an existing service
</p>
<h2><span class="mw-headline" id="Services_Provided"><span class="mw-headline-number">3</span> Services Provided</span></h2>
<p>The module provides an additional format to the <code>dap</code> service's <code>dods</code> command. The format is used to specify a "returnAs" format. This module provides the additional format of returning the OPenDAP data object as a GeoTIFF or JPEG2000 file.
</p>
<h2><span class="mw-headline" id="How_to_use_the_module"><span class="mw-headline-number">4</span> How to use the module</span></h2>
<p>Once installed, the <i>fong.conf</i> file is installed in the BES etc/bes/modules directory and is automatically loaded by the BES at startup. There is a configuration option that you can change for this module. The <i>FONg.Tempdir' parameter in the </i>fong.conf<i> configuration file tells the module where to store the files generated by the module until the file is streamed back to the caller. The default value for this parameter is the /tmp directory. You should change this to a location where there is plenty of disk space/quota that is owned by the user set to run the BES.</i>
</p>
<pre>FONg.Tempdir=/tmp
</pre>
<p>The next time the BES is started it will load this module. And, once installed, the OLFS will know that it can use this module to transform your data. You can get GeoTIFF or JPEG2000 responses for applicable datasets by appending the extensions <i>.tiff</i> or <i>.jp2</i> to the dataset's OpenDAP URL.
</p><p>If not using the OLFS to serve your data, for example if using the bescmdln, you would run a command file that would look something like this:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="xml source-xml"><pre class="de1"><span class="sc3"><span class="re1">&lt;?xml</span> <span class="re0">version</span>=<span class="st0">&quot;1.0&quot;</span> <span class="re0">encoding</span>=<span class="st0">&quot;UTF-8&quot;</span><span class="re2">?&gt;</span></span>
<span class="sc3"><span class="re1">&lt;request</span> <span class="re0">reqID</span>=<span class="st0">&quot;some_unique_value&quot;</span> <span class="re2">&gt;</span></span>
    <span class="sc3"><span class="re1">&lt;setContext</span> <span class="re0">name</span>=<span class="st0">&quot;dap_format&quot;</span><span class="re2">&gt;</span></span>dap2<span class="sc3"><span class="re1">&lt;/setContext<span class="re2">&gt;</span></span></span>
    <span class="sc3"><span class="re1">&lt;setContainer</span> <span class="re0">name</span>=<span class="st0">&quot;c&quot;</span> <span class="re0">space</span>=<span class="st0">&quot;catalog&quot;</span><span class="re2">&gt;</span></span>data/nc/coads_climatology.nc<span class="sc3"><span class="re1">&lt;/setContainer<span class="re2">&gt;</span></span></span>
    <span class="sc3"><span class="re1">&lt;define</span> <span class="re0">name</span>=<span class="st0">&quot;d&quot;</span><span class="re2">&gt;</span></span>
	<span class="sc3"><span class="re1">&lt;container</span> <span class="re0">name</span>=<span class="st0">&quot;c&quot;</span> <span class="re2">/&gt;</span></span>
    <span class="sc3"><span class="re1">&lt;/define<span class="re2">&gt;</span></span></span>
    <span class="sc3"><span class="re1">&lt;get</span> <span class="re0">type</span>=<span class="st0">&quot;dods&quot;</span> <span class="re0">definition</span>=<span class="st0">&quot;d&quot;</span> <span class="re0">returnAs</span>=<span class="st0">&quot;tiff&quot;</span><span class="re2">/&gt;</span></span>
<span class="sc3"><span class="re1">&lt;/request<span class="re2">&gt;</span></span></span></pre></div></div>
<p>In addition to setting the directory where the response file is initially built, you can use the <i>FONg.default_gcs</i> configuration parameter to set the default Geographical Coordinate System (GCS) for the handler. This GCS will be used when the dataset's metadata does not provide information GCS that the handler can recognize.
</p>

</div>
		<!-- end content -->
				<div class="visualClear"></div>
	</div>
</div></div>
</body></html>