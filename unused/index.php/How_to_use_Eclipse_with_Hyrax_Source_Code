
<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<title>How to use Eclipse with Hyrax Source Code - OPeNDAP Documentation</title>
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-How_to_use_Eclipse_with_Hyrax_Source_Code skin-monobook action-view">
<div id="globalWrapper">
<div id="column-content"><div id="content" class="mw-body-primary" role="main">
	
	
	<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">How to use Eclipse with Hyrax Source Code</span></h1>
	<div id="bodyContent" class="mw-body">
		<div id="siteSub">From OPeNDAP Documentation</div>
		<div id="contentSub"></div>
		

		<!-- start content -->
<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><p>This presents one way to set up Eclipse to build, edit, debug, etc., the Hyrax source code. It's based on our previous how to documents, but is updated for (and maybe specific to) OSX 10.10, Eclipse 4.4 (Luna) and CDT 8.5. There are many things about Eclipse that can be pretty obscure, not the least of which is that Eclipse &amp; CDT are not really 'just Eclipse' but may have specific configuration nuances. This is almost certainly not the <i>only</i> way to set this tool up to build the Hyrax code, just one way.
</p><p>The set up assumes that you have already cloned the <i>hyrax</i> repo from GitHub (<a rel="nofollow" class="external free" href="https://github.com/opendap/hyrax.git">https://github.com/opendap/hyrax.git</a>) and have run <i>source spath.sh</i> and <i>./hyrax_clone.sh</i> so that the $PATH and $prefix environment variables are set and the <i>libdap</i>, <i>bes</i> and <i>olfs</i> repos have all been cloned. For most development, it's a good idea to clone <i>hyrax-dependencies</i> too. 
</p>
<h2><span class="mw-headline" id="The_git_perspective"><span class="mw-headline-number">1</span> The <i>git</i> perspective</span></h2>
<p>What I've done to make projects that use the existing C++ code repos cloned from GitHub was to first use the <i>git</i> perspective to add the repo to Eclipse.
</p><p>Switch to the <i>git</i> perspective using either the icon/toll-bar item on the right side of the main window  or by going to the Window -&gt; Open Perspective menu item. 
</p><p><a href="../index.php/File:Perspective_Menu.png" class="image" title="Perspective views are accessed using either the rightmost set of icons or the Window menu"><img alt="Perspective views are accessed using either the rightmost set of icons or the Window menu" src="../images/0/06/Perspective_Menu.png" width="367" height="392" class="thumbborder" /></a>
</p><p>Once the Eclipse window is showing the <i>git</i> perspective, you'll see something like the following:
</p><p><a href="../index.php/File:Git_Repo_Perspective.png" class="image"><img alt="Git Repo Perspective.png" src="../images/f/f9/Git_Repo_Perspective.png" width="1506" height="989" /></a>
</p><p>Use the <i>Add existing git repository</i> icon to add an existing <i>git</i> repo.
</p><p><a href="../index.php/File:Add_Existing_Repo.png" class="image"><img alt="Add Existing Repo.png" src="../images/c/c3/Add_Existing_Repo.png" width="747" height="121" /></a>
</p><p>The result looks like:
</p><p><a href="../index.php/File:Once_Added.png" class="image"><img alt="Once Added.png" src="../images/4/41/Once_Added.png" width="726" height="376" /></a>
</p>
<h2><span class="mw-headline" id="Make_the_projects"><span class="mw-headline-number">2</span> Make the projects</span></h2>
<p>Follow theses steps to make a new project using the repo you just added to the <i>git</i> perspective.
</p>
<ul>
<li> Import Projects
</li>
<li> New Project
</li>
<li> Use the New Project Wizard
</li>
<li> Existing Code Makefile
</li>
<li> Setup the Project
</li>
<li> Switch to C++ Perspective
</li>
<li> The New project
</li>
</ul>
<p><a href="../index.php/File:0_Import_Projects_2.png" class="image"><img alt="0 Import Projects 2.png" src="../images/4/49/0_Import_Projects_2.png" width="659" height="656" /></a>
</p><p><a href="../index.php/File:2_Use_New_Project_Wizard.png" class="image"><img alt="2 Use New Project Wizard.png" src="../images/a/a6/2_Use_New_Project_Wizard.png" width="1478" height="961" /></a>
</p><p><a href="../index.php/File:3_Existing_Code_Makefile.png" class="image"><img alt="3 Existing Code Makefile.png" src="../images/a/a5/3_Existing_Code_Makefile.png" width="1478" height="961" /></a>
</p><p><a href="../index.php/File:4_Setup_The_Project.png" class="image"><img alt="4 Setup The Project.png" src="../images/9/91/4_Setup_The_Project.png" width="1478" height="961" /></a>
</p><p><a href="../index.php/File:5_Switch_To_Cpp_Perspective.png" class="image"><img alt="5 Switch To Cpp Perspective.png" src="../images/3/36/5_Switch_To_Cpp_Perspective.png" width="326" height="240" /></a>
</p><p><a href="../index.php/File:6_The_New_Project.png" class="image"><img alt="6 The New Project.png" src="../images/6/6d/6_The_New_Project.png" width="899" height="475" /></a>
</p>
<h2><span class="mw-headline" id="General_Eclipse_configurations"><span class="mw-headline-number">3</span> General Eclipse configurations</span></h2>
<p>These are not specific to our project, but they are very useful and somewhat hard to sort out.
</p>
<ul>
<li> How to set up PATH so the CDT build (which uses an external program) reads from the PATH you want instead of the default PATH
<ul>
<li> <a href="../index.php/File:0_Set_PATH_in_Eclipse.png" class="image"><img alt="0 Set PATH in Eclipse.png" src="../images/b/b7/0_Set_PATH_in_Eclipse.png" width="943" height="771" /></a>
</li>
<li> <a href="../index.php/File:1_Add_the_prefix_var_to_project.png" class="image"><img alt="1 Add the prefix var to project.png" src="../images/7/7b/1_Add_the_prefix_var_to_project.png" width="1947" height="1226" /></a>
</li>
<li> <a href="../index.php/File:2_Set_PATH_in_the_project.png" class="image"><img alt="2 Set PATH in the project.png" src="../images/1/11/2_Set_PATH_in_the_project.png" width="867" height="604" /></a>
</li>
<li> Do you need to set PATH in both Eclipse and the Project? I don't know, but that's what I wound up doing to get it to work.
</li>
</ul>
</li>
<li> How to get the editor in CDT to save before building code
<ul>
<li> <a href="../index.php/File:0_Set_autosave_on_build.png" class="image"><img alt="0 Set autosave on build.png" src="../images/b/b7/0_Set_autosave_on_build.png" width="900" height="652" /></a>
</li>
</ul>
</li>
<li> How to configure builds using an existing Makefile
<ul>
<li> <a href="../index.php/File:0_make_target.png" class="image"><img alt="0 make target.png" src="../images/1/17/0_make_target.png" width="381" height="204" /></a>
</li>
<li> <a href="../index.php/File:1_configure_new_make_target.png" class="image"><img alt="1 configure new make target.png" src="../images/b/b8/1_configure_new_make_target.png" width="1947" height="1226" /></a>
</li>
</ul>
</li>
<li> Editor tweaks:
<ul>
<li> Emacs mode (it's not a real emacs, but it's bearable)
</li>
<li> How to configure Eclipse's editor to find includes
<ul>
<li> <a href="../index.php/File:0_Goto_includes_fir_project.png" class="image"><img alt="0 Goto includes fir project.png" src="../images/6/64/0_Goto_includes_fir_project.png" width="828" height="547" /></a>
</li>
<li> <a href="../index.php/File:1_Add_directory_workspace_path.png" class="image"><img alt="1 Add directory workspace path.png" src="../images/6/65/1_Add_directory_workspace_path.png" width="833" height="545" /></a>
</li>
<li> <a href="../index.php/File:2_Result_of_adding_workspace_path.png" class="image"><img alt="2 Result of adding workspace path.png" src="../images/1/1f/2_Result_of_adding_workspace_path.png" width="824" height="543" /></a>
</li>
<li> [File:4 Filesystem path.png]]
</li>
<li> <a href="../index.php/File:3_Add_filesystem_path.png" class="image"><img alt="3 Add filesystem path.png" src="../images/6/6c/3_Add_filesystem_path.png" width="900" height="711" /></a>
</li>
<li> <a href="../index.php/File:5_Probably_reindex.png" class="image"><img alt="5 Probably reindex.png" src="../images/2/26/5_Probably_reindex.png" width="1947" height="1226" /></a>
</li>
</ul>
</li>
<li> Setting up folding to hide #if 0 ... #endif blocks (help with refactoring, among other things).
<ul>
<li> <a href="../index.php/File:0_Editor_folding.png" class="image"><img alt="0 Editor folding.png" src="../images/8/82/0_Editor_folding.png" width="1947" height="1251" /></a>
</li>
<li> <a href="../index.php/File:1_editor_folding.png" class="image"><img alt="1 editor folding.png" src="../images/3/30/1_editor_folding.png" width="827" height="273" /></a>
</li>
<li> <a href="../index.php/File:2_editor_folding.png" class="image"><img alt="2 editor folding.png" src="../images/f/fa/2_editor_folding.png" width="654" height="641" /></a>
</li>
</ul>
</li>
</ul>
</li>
<li> GDB on OS/X 10.9 and 10.10 is broken WRT shared object libraries (i.e., BES modules). 
<ul>
<li> Build GDB 7.8.x (other versions might work, but the default 6.x that comes with OS/X won't). To do this I had to <i>sudo cp /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.9.sdk/usr/include/machine/setjmp.h /usr/include/machine/</i> because while <i>setjmp.h</i> is present, there's nothing in &lt;machine/setjmp.h&gt; on 10.10 (and maybe 10.9, too). This may also explain the <i>homebrew</i> install fail on gdb, but I don't know. I also used <i>export CC=gcc</i> before running <i>./configure</i> for gdb, but I doubt that made any difference in hindsight. Regardless, get a modern GDB built and installed.
</li>
<li> Follow this advice on setup with eclipse: <a rel="nofollow" class="external free" href="http://ntraft.com/installing-gdb-on-os-x-mavericks/">http://ntraft.com/installing-gdb-on-os-x-mavericks/</a>. NB: since PATH is already configured to have /usr/local/bin before the other stuff, the part about setting C/C++ -&gt; Debug -&gt; GDB to /usr/local/bin/gdb may be moot, but I did it all the same. The example shows the preferences window from a version of eclipse earlier than 4.4, which I am using.
</li>
<li> GDB and libtool: But GDB won't debug programs built with shared libs (dylibs on OS/X), responding with this message: <i>"hell": not in executable format: File format not recognized</i> for the program <i>hell</i> that's linked using libtool. Nice. The work-around is to use <i>libtool --mode=execute gdb hell</i> and maybe to set GDB to be <i>libtool --mode=execute gdb</i> although I have not tried the later.
</li>
<li> Here is advice on signing GDB (if you build it from source) so that OS/X 10.9++ will run it and let it attach to a running process: <a rel="nofollow" class="external free" href="https://sourceware.org/gdb/wiki/BuildingOnDarwin">https://sourceware.org/gdb/wiki/BuildingOnDarwin</a>
</li>
<li> Now set up Eclipse:
<ul>
<li> <a href="../index.php/File:0_GDB_Issues_with_shared_libs.png" class="image"><img alt="0 GDB Issues with shared libs.png" src="../images/d/d2/0_GDB_Issues_with_shared_libs.png" width="842" height="373" /></a>
</li>
<li> <a href="../index.php/File:1_GDB_Issues_cont.png" class="image"><img alt="1 GDB Issues cont.png" src="../images/d/d2/1_GDB_Issues_cont.png" width="810" height="399" /></a>
</li>
<li> <a href="../index.php/File:2_Setup_the_debug_configuration.png" class="image"><img alt="2 Setup the debug configuration.png" src="../images/4/43/2_Setup_the_debug_configuration.png" width="759" height="686" /></a>
</li>
<li> <a href="../index.php/File:3_Debug_config_dialog.png" class="image"><img alt="3 Debug config dialog.png" src="../images/2/2e/3_Debug_config_dialog.png" width="1947" height="1226" /></a>
</li>
<li> <a href="../index.php/File:4_Use_legacy_launcing_with_Eclipse_4.4.png" class="image"><img alt="4 Use legacy launcing with Eclipse 4.4.png" src="../images/0/08/4_Use_legacy_launcing_with_Eclipse_4.4.png" width="1947" height="1226" /></a>
</li>
<li> <a href="../index.php/File:5_Debugger_tab_should_look_like.png" class="image"><img alt="5 Debugger tab should look like.png" src="../images/8/85/5_Debugger_tab_should_look_like.png" width="1947" height="1226" /></a>
</li>
<li> <a href="../index.php/File:6_warning_gone.png" class="image"><img alt="6 warning gone.png" src="../images/0/09/6_warning_gone.png" width="913" height="420" /></a>
</li>
</ul>
</li>
<li> <a href="../index.php/File:0_GDB_Suppres_auto_build_on_launch.png" class="image"><img alt="0 GDB Suppres auto build on launch.png" src="../images/c/c0/0_GDB_Suppres_auto_build_on_launch.png" width="1947" height="1251" /></a>
</li>
<li>
</li>
</ul>
</li>
</ul>




</div>
				<!-- end content -->
				<div class="visualClear"></div>
	</div>
</div></div>
</body></html>