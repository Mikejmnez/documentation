
<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<title>BES - Modules - The HDF5 Handler - OPeNDAP Documentation</title>
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-BES_-_Modules_-_The_HDF5_Handler skin-monobook action-view">
<div id="globalWrapper">
<div id="column-content"><div id="content" class="mw-body-primary" role="main">
	
	
	<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">BES - Modules - The HDF5 Handler</span></h1>
	<div id="bodyContent" class="mw-body">
		<div id="siteSub">From OPeNDAP Documentation</div>
		<div id="contentSub"></div>
		

		<!-- start content -->
<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Kinds_of_files_the_handler_will_serve"><span class="tocnumber">1</span> <span class="toctext">Kinds of files the handler will serve</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Mappings_between_the_HDF5_data_model_and_DAP2_data_types"><span class="tocnumber">1.1</span> <span class="toctext">Mappings between the HDF5 data model and DAP2 data types</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Special_characters_in_HDF_identifiers"><span class="tocnumber">1.2</span> <span class="toctext">Special characters in HDF identifiers</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Known_problems"><span class="tocnumber">1.3</span> <span class="toctext">Known problems</span></a>
<ul>
<li class="toclevel-3 tocsection-5"><a href="#Handling_of_floating_point_attributes"><span class="tocnumber">1.3.1</span> <span class="toctext">Handling of floating point attributes</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-6"><a href="#Configuration_parameters"><span class="tocnumber">2</span> <span class="toctext">Configuration parameters</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#Appendix"><span class="tocnumber">3</span> <span class="toctext">Appendix</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Kinds_of_files_the_handler_will_serve"><span class="mw-headline-number">1</span> Kinds of files the handler will serve</span></h2>
<p>This release of the server supports HDF5 files written using any version of the HDF5 API. The handler should be built/linked with version 1.8.x of the API.
</p>
<h3><span class="mw-headline" id="Mappings_between_the_HDF5_data_model_and_DAP2_data_types"><span class="mw-headline-number">1.1</span> Mappings between the HDF5 data model and DAP2 data types</span></h3>
<p>The mapping between the HDF5 and HDF-EOS5 data model and DAP2 is documented in a NASA Technical Note (<a rel="nofollow" class="external text" href="http://www.esdswg.org/spg/rfc/esds-rfc-017">ESDS-RFC-017</a>). This note is quite detailed; a summary from its appendix is provided below.
</p>
<h3><span class="mw-headline" id="Special_characters_in_HDF_identifiers"><span class="mw-headline-number">1.2</span> Special characters in HDF identifiers</span></h3>
<p>A number of non-alphanumeric characters (e.g., space, #, +, -) used in HDF identifiers are not allowed in the names of DAP objects, object components or in URLs. The HDF5 data handler therefore deals internally with translated versions of these identifiers. To translate the WWW convention of escaping such characters by replacing them with "%" followed by the hexadecimal value of their ASCII code is used. For example, "Raster Image #1" becomes "Raster%20Image%20%231". These translations should be transparent to users of the server (but they will be visible in the DDS, DAS and in any applications which use a client that does not translate the identifiers back to their original form).
</p>
<h3><span class="mw-headline" id="Known_problems"><span class="mw-headline-number">1.3</span> Known problems</span></h3>
<h4><span class="mw-headline" id="Handling_of_floating_point_attributes"><span class="mw-headline-number">1.3.1</span> Handling of floating point attributes</span></h4>
<p>Because the DAP software encodes attribute values as ASCII strings there will be a loss of accuracy for floating point attributes. This loss of accuracy is dependent on the version of the C++ I/O library used in compiling/linking the software (i.e., the amount of floating point precision preserved when outputting to ASCII is dependent on the library). Typically it is very small (e.g., at least six decimal places are preserved).
</p>
<h2><span class="mw-headline" id="Configuration_parameters"><span class="mw-headline-number">2</span> Configuration parameters</span></h2>
<dl>
<dt>H5.EnableCF</dt>
<dd> This is an option to support NASA HDF5/HDF-EOS5 data products. The HDF5/HDF-EOS5 data products do not follow CF conventions. However, hdf5_handler can make them follow the conventions if you turn on this option. The key benefit of this option is to allow OPeNDAP visualization clients to display remote data seamlessly. Please visit <a rel="nofollow" class="external text" href="http://hdfeos.org/software/hdf5_handler/doc/cf.php">here</a> for details. 
</dd>
</dl>
<dl>
<dt>H5.IgnoreUnknownTypes</dt>
<dd> Ignore variables that use data types the handler cannot process. In practice this means 64-bit integers. DAP2 does not support the 64-bit integer type; using this parameter (i.e., setting its value to <i>yes</i> or <i>true</i>) means that 64-bit integer variables are ignored and the rest of the variables in the file can be read. The default value of this parameter (<i>no</i> or <i>false</i>) configures the handler to return an error when a 64-bit integer variable is found.
</dd>
</dl>
<dl>
<dt>H5.EnableCheckNameClashing</dt>
<dd> This option checks if there are duplicate variable names when group information is removed and some characters are replaced with underscore character. Although this option is required to ensure that no two variable names are same, the operation is quite costly and thus can degrade the performance significantly. If you are certain that your HDF5 data won't have any duplicate name, you can turn this off to gain the performance of the server. For the NASA HDF5/HDF-EOS5 products we tested (AURA OMI/HIRDLS/MLS/TES, MEaSUREs SeaWiFS/Ozone, Aquarius, GOSAT/acos, SMAP), we did not find any name clashing for those objects. So the name clashing check seems unnecessary and this option is turned off by default. The handler will check the name clashing for any products not tested regardless of turning this option on or off.
</dd>
</dl>
<dl>
<dt>H5.EnableAddPathAttr</dt>
<dd> When this option is turned off, the HDF5 handler will not insert the  <b>fullnamepath</b> and <b>origname</b> attribute in DAS output. For example, the DAS output like below:
</dd>
</dl>
<pre>     temperature {
        String units "K";
        String origname "temperature";
        String fullnamepath "/HDFEOS/GRIDS/GeoGrid/Data Fields/temperature";
        String orig_dimname_list "XDim ";
      }
</pre>
<dl>
<dd>will change to:
</dd>
</dl>
<pre>     temperature {
        String units "K";
        String orig_dimname_list "XDim ";
     }
</pre>
<dl>
<dt> H5.EnableDropLongString</dt>
<dd> NetCDF Java client cannot handle string size bigger than 32767 and will throw an error if such variable is seen. Thus, the HDF5 handler need to hide such long string variables from DAS and DDS output. Setting this option to true will ensure that NetCDF Java OPeNDAP visualization clients such as IDV and Panoply can visualize other important variables.
</dd>
</dl>
<dl>
<dt> H5.DisableStructMetaAttr</dt>
<dd> When this option is true, StructMetadata attribute will not be generated in DAS output.
</dd>
</dl>
<h2><span class="mw-headline" id="Appendix"><span class="mw-headline-number">3</span> Appendix</span></h2>
<table border="1" style="text-align:center;">
<caption> <i>The complete set of mappings for the types in the HDF5 and HDF-EOS5 data model</i>
</caption>
<tr>
<th> HDF5 data type
</th>
<th> DAP2 data name
</th>
<th> Notes
</th></tr>
<tr>
<td>8-bit unsigned integer
</td>
<td>Byte
</td>
<td>
</td></tr>
<tr>
<td>8-bit signed integer
</td>
<td>Int16
</td>
<td>
</td></tr>
<tr>
<td>16-bit unsigned integer
</td>
<td>UInt16
</td>
<td>
</td></tr>
<tr>
<td>16-bit signed integer
</td>
<td>Int16
</td>
<td>
</td></tr>
<tr>
<td>32-bit unsigned integer
</td>
<td>UInt32
</td>
<td>
</td></tr>
<tr>
<td>32-bit signed integer
</td>
<td>Int32
</td>
<td>
</td></tr>
<tr>
<td>64-bit unsigned integer
</td>
<td>N/A
</td>
<td>Results in an error unless H5.IgnoreUnknownTypes is true. See above.
</td></tr>
<tr>
<td>64-bit signed integer
</td>
<td>N/A
</td>
<td> ... H5.IgnoreUnknownTypes ...
</td></tr>
<tr>
<td>32-bit floating point
</td>
<td>Float32
</td>
<td>
</td></tr>
<tr>
<td>64-bit floating point
</td>
<td>Float64
</td>
<td>
</td></tr>
<tr>
<td>String
</td>
<td>String
</td>
<td>
</td></tr>
<tr>
<td>Object/region reference
</td>
<td>URL
</td>
<td>
</td></tr>
<tr>
<td>Compound
</td>
<td>Structure
</td>
<td align="left">HDF5 compound can be mapped to DAP2 under the condition that the base members	(excluding object/region references) of compound can be mapped to DAP2.
</td></tr>
<tr>
<td>Dataset
</td>
<td>Variable
</td>
<td align="left">HDF5 dataset can be mapped to DAP2 under the condition that the datatype of the HDF5dataset can be mapped to DAP2.
</td></tr>
<tr>
<td>Attribute
</td>
<td>Attribute
</td>
<td align="left">HDF5 attribute can be mapped to DAP2 under the condition that the datatype of the HDF5 dataset can be mapped to DAP2, and the data is either scalar or one-dimensional array.
</td></tr>
<tr>
<td>Group
</td>
<td>naming convention
</td>
<td align="left">A special attribute <i>HDF5_ROOT_GROUP</i> is used to represent the HDF5 group structure; The absolute path of the HDF5 dataset as the DAP2 variable name; HDF5 group can be mapped to DAP2 under the condition that the file structure is a tree structure.
</td></tr>
<tr>
<td>HDF-EOS5 grid w/1-D projection
</td>
<td>Grid
</td>
<td align="left">The latitude and longitude are encoded according to CF
</td></tr>
<tr>
<td>HDF-EOS5 grid w/2-D projection
</td>
<td>Arrays
</td>
<td align="left">Map data variables to DAP2 Arrays; generate DAP2 Arrays for latitude and longitude (following CF); add a <i>coordinates</i> attribute for each variable providing the names of the coordinate variables (following CF).
</td></tr>
<tr>
<td>HDF-EOS5 Swath
</td>
<td>Arrays
</td>
<td align="left">Follow the same prescription as with HDF-EOS5 2-D grids
</td></tr></table>


</div>
				<!-- end content -->
				<div class="visualClear"></div>
	</div>
</div></div>
</body></html>